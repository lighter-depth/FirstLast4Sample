# SBFirstLast4: ローカル辞書
機能「ローカル辞書」を使うことで、任意の単語をFirstLast4に読み込むことができます。<br/><br/>
<img src="https://github.com/user-attachments/assets/521e3e06-685f-4557-a574-ab7703e99bed" width=50% /><br/>  
ローカル辞書読み込みの際には、ローカル辞書の形式、書式、および読み込み時の特殊なオプションを指定することができます。
## ファイル名
角括弧 `[]` を含む**属性**をファイル名中で指定することで、辞書そのものの解釈方法を変更することができます。  
それぞれの属性は、`[quiet]`属性を除き、他の属性と併用することはできません。
|属性名|省略名|書式指定|備考|
|---|---|---|---|
|`[mixed]`|`[m]`|可|タイプなし単語とタイプあり単語が混在する辞書を示します。|
|`[typeless]`|`[l]`|可|タイプなし単語のみで構成される辞書を示します。|
|`[typed]`|`[d]`|可|タイプあり単語のみで構成される辞書を示します。|
|`[typeless_authentic]`|`[la]`|不可|タイプなし単語のみで構成される辞書を示します。|
|`[typed_authentic]`|`[da]`|不可|タイプあり単語のみで構成される辞書を示します。|
|`[quiet]`|-|-|読み込み時に自動で無効化される辞書を示します。|

属性を指定しない場合、デフォルトで`[la]`属性が適用されます。

### `[la]`および`[da]`属性
`[la]`属性および`[da]`属性を指定した辞書は、デフォルトの書式の使用を前提として最適化されたメソッドにより、単語の読み取りが行われます。  
これらの属性を含む辞書に領域の宣言を含めることはできません。

### `[quiet]`属性
`[quiet]`属性を指定した辞書は、デフォルトで「無効」状態として読み込まれます。

## 書式指定
`[m]`、`[l]`および`[d]`属性を適用した辞書については、ファイル内部に**書式指定**を含めることができます。
```c
.format
// 書式指定の例
joint: \s
typename: fullname
typeopen: (
typejoint: /
typeclose: )
.data
りんご (食べ物/植物)、ごりら (動物)、らっぱ (芸術)、/* ... */
```
### 領域
書式指定は<b>`.format`領域</b>内で行う必要があります。また、書式指定を行う場合、辞書の内容そのものは<b>`.data`領域</b>内にて宣言しなければなりません。  
```c
// .format 領域
.format
/* 書式の指定 */
/* ... */

.data
/* 辞書の内容 */
/* ... */
```
`.format`領域の内容は辞書の読み込み時に、`.data`領域の内容は辞書の確定時にそれぞれ解釈されます。これを**領域展開**と呼びます。
### 指定可能な書式
ローカル辞書においては、以下の書式を指定することができます。
|指定子|型|備考|
|---|---|---|
|`open`|`string?`|単語リストの開始をマークする文字列を指定します。これ以前の文字列は領域から除外されます。|
|`close`|`string?`|単語リストの終了をマークする文字列を指定します。これ以後の文字列は領域から除外されます。|
|`separator`|`string?`|単語同士を分割する文字列を指定します。|
|`joint`|`string`|単語名とタイプ名を分割する文字列を指定します。|
|`typename`|`WordTypeFormat`|タイプ名の書式を指定します。|
|`typeopen`|`string?`|タイプ名の列挙の開始をマークする文字列を指定します。|
|`typejoint`|`string`|タイプ名同士を分割する文字列を指定します。|
|`typeclose`|`string?`|タイプ名の列挙の終了をマークする文字列を指定します。|
|`omit`|`string[]?`|指定された文字列を行頭に含む行について、翻訳から除外します。|

#### リテラルについて
生文字列を直接入力することにより、`string`型のリテラルとして解釈されます。
```
open: OPEN
close: //
joint: ---
```
ただし、null許容として定義されている型（`string?`型および`string[]?`型）については、例外的に`null`リテラルを無効な値として受け付けます。
```
typeopen: null
omit: null
```
`omit`指定子による書式指定中において、文字列同士をカンマ`,`で区切ることにより、`string[]`型として解釈されます。
```
omit: *, #, //
```
### `typename`書式指定
`typename`書式指定を用いることで、タイプ名の読み込み方法を変更することができます。
列挙子を示す生文字列を入力することで、`WordTypeFormat`列挙型のリテラルとして解釈されます。
```
typename: abbreviated
```
指定可能な書式の一覧は次の通りです。
|書式名|例|備考|
|---|---|---|
|`fullname`|`食べ物`, `暴言`|タイプ名を直接表記します。|
|`abbreviated`|`食`, `言`|省略されたタイプ名を表記します。|
|`typecode`|`F`, `Z`|タイプ名コードを表記します。|
#### `abbreviated`書式および`typecode`書式
`abbreviated`書式および`typecode`書式を用いた場合、特殊な評価方法を使用して各単語のタイプを決定します。  
それぞれのタイプに係る省略表記は次の通りです。
|タイプ名|省略表記|コード|
|---|---|---|
|ノーマル|`ノ`|`N`|
|動物|`動`|`A`|
|植物|`植`|`Y`|
|地名|`地`|`G`|
|感情|`感`|`E`|
|芸術|`芸`|`C`|
|食べ物|`食`|`F`|
|暴力|`暴`|`V`|
|医療|`医`|`H`|
|人体|`体`|`B`|
|機械|`機`|`M`|
|理科|`理`|`Q`|
|時間|`時`|`T`|
|人物|`人`|`P`|
|工作|`工`|`W`|
|服飾|`服`|`L`|
|社会|`社`|`S`|
|遊び|`遊`|`J`|
|虫|`虫`|`D`|
|数学|`数`|`X`|
|暴言|`言`|`Z`|
|宗教|`宗`|`R`|
|スポーツ|`ス`|`U`|
|天気|`天`|`W`|
|物語|`物`|`O`|
|分類なし|`無`|`I`|
